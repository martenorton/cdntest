(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-887893d6"],{1165:function(e,t,n){},2744:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"novel-featured-book-warp"},[n("div",{staticClass:"container"},[e._m(0),n("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.tableData,"row-key":"id",border:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[n("el-table-column",{attrs:{prop:"name",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.name))])]}}])}),n("el-table-column",{attrs:{prop:"code",label:"标识"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.code))])]}}])}),n("el-table-column",{attrs:{prop:"type",label:"类别"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.type))])]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["module"==t.row.type?n("v-add",{attrs:{getData:e.getData,dataSource:t.row||null,id:t.row.id}}):n("v-add",{attrs:{type:"edit",getData:e.getData,dataSource:t.row||null,id:t.row.id}})]}}])})],1),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.params.pageSize||20},on:{"current-change":e.handleCurrentChange}})],1)],1)])},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"head-nav"},[n("span",{staticClass:"title"},[e._v("模块管理")])])}],o=n("dc69"),r=n("ed08");function c(e,t){return Object(r["a"])("/api/admin/module/list","get",e).then((function(e){e&&t&&t(e)}))}function s(e,t){return Object(r["a"])("/api/admin/module/add_title","POST",e).then((function(e){e&&t&&t(e)}))}function u(e,t){return Object(r["a"])("/api/admin/module/up_title","POST",e).then((function(e){e&&t&&t(e)}))}function l(e,t){return Object(r["a"])("/api/admin/module/del_title","get",e).then((function(e){e&&t&&t(e)}))}var d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"add-book-btn-warp"},["title"!=this.dataSource.type?n("el-button",{attrs:{type:"add",icon:"search"},on:{click:function(t){return e.handleOpen()}}},[e._v("新增标题栏")]):e._e(),"title"==this.dataSource.type?n("div",{attrs:{icon:"search"}},[n("el-button",{on:{click:function(t){return e.handleOpen()}}},[e._v("修改")]),1!=this.dataSource.is_default?n("el-button",{on:{click:function(t){return e.handleDelete()}}},[e._v("删除")]):e._e()],1):e._e(),"txt"!=e.type?n("el-dialog",{attrs:{"close-on-click-modal":!1,title:"edit"==e.type||"Permission"==e.type?"编辑":"新增",visible:e.editVisible,width:"40%"},on:{"update:visible":function(t){e.editVisible=t}}},[n("el-form",{ref:"ruleForm",staticClass:"detalis-form",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},["edit"!=e.type?n("el-form-item",{attrs:{label:" 标识",prop:"code"}},[n("el-input",{model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1):e._e(),"Permission"!=e.type?n("el-form-item",{attrs:{label:"名字",prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1):e._e()],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1):e._e(),n("el-dialog",{attrs:{title:"提示",visible:e.delVisible,"close-on-click-modal":!1,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[n("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.deleteSure}},[e._v("确 定")])],1)])],1)},f=[],m=(n("7585"),n("5118"),{name:"basetable",components:{},props:{getData:{type:Function,default:null},type:{type:String,default:null},dataSource:{type:Object,default:null}},data:function(){return{checkAll:!1,checkedCities:[],Permission:[],isIndeterminate:!0,editVisible:!1,modulelist:[],form:{},rules:{code:[{required:!0,message:"请填写信息",trigger:"blur"}],name:[{required:!0,message:"请填写信息",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}],roleType:[{required:!0,message:"请选择用户类型",trigger:"change"}]},props:{label:"name"},count:1,delVisible:!1}},created:function(){window.localStorage.getItem("_token")},computed:{},methods:{handleOpen:function(){this.editVisible=!0,console.log(this.dataSource,"类型"),"edit"==this.type&&(this.form=JSON.parse(JSON.stringify(this.dataSource)))},handleDelete:function(){this.delVisible=!0},deleteSure:function(){var e=this;l({id:this.dataSource.id},(function(t){0==t.code&&(e.$message.success("成功"),_this.getData())})),this.delVisible=!1},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;"edit"==t.type?(t.form.id=t.dataSource.id,u(t.form,(function(e){0==e.code&&(t.$message.success("成功"),_this.getData())}))):(t.form.id=t.dataSource.id,s(t.form,(function(e){0==e.code&&(t.$message.success("成功"),_this.getData())}))),t.editVisible=!1,t.form={}}))},resetForm:function(e){this.$refs[e].resetFields()}}}),p=m,h=(n("4638"),n("2877")),g=Object(h["a"])(p,d,f,!1,null,null,null),b=g.exports,v={name:"basetable",components:{vVideo:b,vAdd:b},data:function(){return{cur_page:1,editVisible:!1,delVisible:!1,form:{name:"",date:"",address:""},tableData:[],params:{},total:1}},created:function(){this.params.top_id=this.$route.query.top_id,this.getData()},computed:{},methods:{handleCurrentChange:function(e){this.params.page=e,this.getData()},getData:function(){var e=this;c(this.params,(function(t){200==t.code&&(console.log(t.data,"123"),e.tableData=t.data)}))},jumpDetails:function(e){this.$router.push({path:"/videoData",query:{id:e.video.id}})},handleEdit:function(e){if(e){var t=e;this.form=t,console.log(t)}else this.form={};this.editVisible=!0},handleUp:function(e,t){var n=this;Object(o["m"])({id:e.id},(function(e){200==e.code&&(n.$message.success("成功"),n.getData())}))},channelFormatter:function(e,t){}}},_=v,y=(n("7747"),Object(h["a"])(_,i,a,!1,null,null,null));t["default"]=y.exports},4638:function(e,t,n){"use strict";var i=n("f3e3"),a=n.n(i);a.a},5118:function(e,t,n){(function(e){var i="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,a=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(a.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new o(a.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n("6017"),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("c8ba"))},6017:function(e,t,n){(function(e,t){(function(e,n){"use strict";if(!e.setImmediate){var i,a=1,o={},r=!1,c=e.document,s=Object.getPrototypeOf&&Object.getPrototypeOf(e);s=s&&s.setTimeout?s:e,"[object process]"==={}.toString.call(e.process)?m():p()?h():e.MessageChannel?g():c&&"onreadystatechange"in c.createElement("script")?b():v(),s.setImmediate=u,s.clearImmediate=l}function u(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return o[a]=r,i(a),a++}function l(e){delete o[e]}function d(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i);break}}function f(e){if(r)setTimeout(f,0,e);else{var t=o[e];if(t){r=!0;try{d(t)}finally{l(e),r=!1}}}}function m(){i=function(e){t.nextTick((function(){f(e)}))}}function p(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function h(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&f(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),i=function(n){e.postMessage(t+n,"*")}}function g(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;f(t)},i=function(t){e.port2.postMessage(t)}}function b(){var e=c.documentElement;i=function(t){var n=c.createElement("script");n.onreadystatechange=function(){f(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function v(){i=function(e){setTimeout(f,0,e)}}})("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n("c8ba"),n("f28c"))},7585:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var i=n("ed08");function a(e,t){return Object(i["a"])("/api/admin/role/list","get",e).then((function(e){e&&t&&t(e)}))}function o(e,t){return Object(i["a"])("/api/admin/role/all","get",e).then((function(e){e&&t&&t(e)}))}function r(e,t){return Object(i["a"])("/api/admin/role/info","get",e).then((function(e){e&&t&&t(e)}))}function c(e,t){return Object(i["a"])("/api/admin/role/distribute_permission","post",e).then((function(e){e&&t&&t(e)}))}function s(e,t){return Object(i["a"])("/api/admin/role/save","post",e).then((function(e){e&&t&&t(e)}))}function u(e,t){return Object(i["a"])("/api/admin/role/del","get",e).then((function(e){e&&t&&t(e)}))}},7747:function(e,t,n){"use strict";var i=n("1165"),a=n.n(i);a.a},dc69:function(e,t,n){"use strict";n.d(t,"k",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"j",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"n",(function(){return d})),n.d(t,"i",(function(){return f})),n.d(t,"l",(function(){return m})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"m",(function(){return g})),n.d(t,"h",(function(){return b}));var i=n("ed08");function a(e,t){return Object(i["a"])("/api/admin/recommend_top/list","get",e).then((function(e){e&&t&&t(e)}))}function o(e,t){return Object(i["a"])("/api/admin/recommend/top","get",e).then((function(e){e&&t&&t(e)}))}function r(e,t){return Object(i["a"])("/api/admin/recommend/del","get",e).then((function(e){e&&t&&t(e)}))}function c(e,t){return Object(i["a"])("/api/admin/recommend_top/set","get",e).then((function(e){e&&t&&t(e)}))}function s(e,t){return Object(i["a"])("/api/admin/recommend_top/save","post",e).then((function(e){e&&t&&t(e)}))}function u(e,t){return Object(i["a"])("/api/admin/recommend/list","get",e).then((function(e){e&&t&&t(e)}))}function l(e,t){return Object(i["a"])("/api/admin/recommend_top/add_video","post",e).then((function(e){e&&t&&t(e)}))}function d(e,t){return Object(i["a"])("/api/admin/video/all_video","get",e).then((function(e){e&&t&&t(e)}))}function f(e,t){return Object(i["a"])("/api/admin/recommend_top/icons","get",e).then((function(e){e&&t&&t(e)}))}function m(e,t){return Object(i["a"])("/api/admin/recommend_top/selected_list","get",e).then((function(e){e&&t&&t(e)}))}function p(e,t){return Object(i["a"])("/api/admin/selected_recommend/list","get",e).then((function(e){e&&t&&t(e)}))}function h(e,t){return Object(i["a"])("/api/admin/recommend_top/add_selected_video","post",e).then((function(e){e&&t&&t(e)}))}function g(e,t){return Object(i["a"])("/api/admin/selected_recommend/top","get",e).then((function(e){e&&t&&t(e)}))}function b(e,t){return Object(i["a"])("/api/admin/selected_recommend/del","get",e).then((function(e){e&&t&&t(e)}))}},ed08:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n("8e6e"),n("ac6a"),n("456d");var i=n("bd86"),a=(n("a481"),n("bc3a")),o=n.n(a),r=n("01ea"),c=n("5c96");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){var t=e.data.code;e.config.url;if(e.status>=200&&e.status<300){if("2000"==t)window.sessionStorage.setItem("_token",""),Object(c["Message"])("请重新登录"),window.location.replace("/#/login");else if(200!==t){var n=e.data.msg;"登录超时，请重新登录"!=n&&"请先登陆"!=n&&1005!==t&&1008!==t&&1034!==t||window.location.replace("/#/login"),Object(c["Message"])(e.data.msg)}return e.data}if(1008===t||1034===t)throw Object(c["Message"])(e.data.msg),window.location.replace("/#/login"),error;throw e.data&&Object(c["Message"])(e.data.msg),error}function d(e){return new Promise((function(t,n){200==e.code?t(e):401==e.code?(Object(c["Message"])("登陆过期,请重新登陆"),window.location.replace("/#/login")):t(e)}))}function f(e){/[\u4e00-\u9fa5]/g.test(e.message)||console.log(e.message)}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],window.localStorage.getItem("_token")||"");switch(t){case"get":n={params:n};break;default:n={data:n}}var a=o.a.create({headers:{Accept:"application/json","Content-Type":"application/json",Authorization:i},timeout:1e4,baseURL:r["a"].baseURL});return a(u({url:"".concat(e),method:t},n)).then(l).then(d).then((function(e){return e})).catch((function(e){return f(e)}))}r["a"]},f3e3:function(e,t,n){}}]);