(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57aaf86f"],{2062:function(t,e,a){},3856:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"screen-btn-warp"},[a("div",{staticClass:"btn-label"},[t._v(t._s(t.label)+":")]),a("div",{staticClass:"item-box"},t._l(t.dataList,(function(e,n){return a("div",{key:n,staticClass:"item",class:{active:t.is_select==n},on:{click:function(a){return t.handleClick(e.value,n)}}},[t._v("\n      "+t._s(e.label)+"\n    ")])})),0)])},i=[],s=(a("c5f6"),{props:{dataList:{type:Array,default:[]},label:{type:String,default:""},default_select:{type:Number,default:0}},data:function(){return{select_data:this.is_select||0,is_change:!1}},computed:{is_select:function(){return!this.default_select||this.is_change?this.select_data:this.default_select}},methods:{handleClick:function(t,e){this.is_change=!0,this.select_data=e,this.$emit("click",t)}},mounted:function(){}}),r=s,o=(a("8026"),a("2877")),l=Object(o["a"])(r,n,i,!1,null,"c9971672",null);e["a"]=l.exports},"39bb":function(t,e,a){"use strict";var n=a("d015"),i=a.n(n);i.a},"5fc7":function(t,e,a){},"70c9":function(t,e,a){},7585:function(t,e,a){"use strict";a.d(e,"f",(function(){return i})),a.d(e,"d",(function(){return s})),a.d(e,"e",(function(){return r})),a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return l})),a.d(e,"a",(function(){return c}));var n=a("ed08");function i(t,e){return Object(n["a"])("/api/admin/role/list","get",t).then((function(t){t&&e&&e(t)}))}function s(t,e){return Object(n["a"])("/api/admin/role/all","get",t).then((function(t){t&&e&&e(t)}))}function r(t,e){return Object(n["a"])("/api/admin/role/info","get",t).then((function(t){t&&e&&e(t)}))}function o(t,e){return Object(n["a"])("/api/admin/role/distribute_permission","post",t).then((function(t){t&&e&&e(t)}))}function l(t,e){return Object(n["a"])("/api/admin/role/save","post",t).then((function(t){t&&e&&e(t)}))}function c(t,e){return Object(n["a"])("/api/admin/role/del","get",t).then((function(t){t&&e&&e(t)}))}},8026:function(t,e,a){"use strict";var n=a("f37d"),i=a.n(n);i.a},8572:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"users-list-warp"},[a("div",{staticClass:"container"},[a("div",{staticClass:"head-nav"},[a("span",{staticClass:"title"},[t._v("管理员列表")]),a("v-add",{attrs:{getData:t.getData}})],1),a("div",{staticClass:"handle-box"},[a("span",{staticClass:"label"},[t._v("搜索：")]),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"账号"},model:{value:t.params.name,callback:function(e){t.$set(t.params,"name",e)},expression:"params.name"}}),a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.getData(!0)}}},[t._v("搜索")])],1),a("div",{staticClass:"screen-box"},[a("v-screen",{key:t.params.resetOptions,attrs:{label:"账号状态",dataList:t.statusParams},on:{click:function(e){t.handleParams(e,"status")}}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"name",label:"账号","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"管理员角色",prop:"hasRoles"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.hasRoles||"暂无"))])]}}])}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"table-cell"},[1==e.row.status?a("a",{staticClass:"icon icon-show",on:{click:function(a){return t.handleEditShow(e.row,0)}}},[t._v("正常")]):t._e(),0==e.row.status?a("a",{staticClass:"icon icon-none",on:{click:function(a){return t.handleEditShow(e.row,1)}}},[t._v("禁用")]):t._e()])]}}])}),a("el-table-column",{attrs:{prop:"created_at",label:"注册时间",width:"180"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("v-role",{staticClass:"cell-item",attrs:{dataSource:e.row,getData:t.getData}}),a("v-add",{staticClass:"cell-item",attrs:{type:"edit",id:e.row.id,dataSource:e.row||null,getData:t.getData}})]}}])}),a("el-table-column",{attrs:{label:"删除",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("v-del",{attrs:{getData:t.getData,id:e.row.id}})]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.params.pageSize||20},on:{"current-change":t.handleCurrentChange}})],1)],1)])},i=[],s=a("3856"),r=a("3dda"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-warp"},["edit"!=t.type?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleOpen()}}},[t._v(t._s("edit"==t.type?"编辑":"新增")+"管理员")]):t._e(),"edit"==t.type?a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(e){return t.handleOpen()}}},[t._v("编辑")]):t._e(),a("el-dialog",{attrs:{title:"edit"==t.type?"编辑":"新增","close-on-click-modal":!1,visible:t.editVisible,width:"40%"},on:{close:function(e){return t.caca("form")},"update:visible":function(e){t.editVisible=e}}},[a("el-form",{ref:"form",staticClass:"detalis-form",attrs:{rules:t.rules,model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"账号",prop:"name"}},[a("el-input",{attrs:{disabled:"edit"==t.type},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"edit"==t.type?"修改密码":"请输入密码","show-password":""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"选择状态"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-option",{key:"1",attrs:{label:"正常",value:1}}),a("el-option",{key:"2",attrs:{label:"禁用",value:0}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.closeBtn("form")}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("form")}}},[t._v("确 定")])],1)],1)],1)},l=[],c=(a("7f7f"),a("ac6a"),a("456d"),a("d2f3")),u={name:"word",components:{vUpload:r["a"]},props:{getData:{type:Function,default:null},dataSource:{type:Object,default:null},type:{type:String,default:null}},data:function(){return{editVisible:!1,form:{},rules:{status:[{required:!0,message:"请填写状态",trigger:"blur"}],name:[{required:!0,message:"请填写昵称",trigger:"blur"},{pattern:/^[^\s]*$/,message:"不能输入空格"},{pattern:/^\S{1,20}$/,message:"请输入1-20位字符"}],password:[{required:"edit"!=this.type,message:"请填写密码",trigger:"blur"},{pattern:/^[^\s]*$/,message:"不能输入空格"},{pattern:/^\S{6,12}$/,message:"请输入6—12位密码"}],platform_flag:[{required:!0,message:"请填写密码",trigger:"change"}]}}},created:function(){},computed:{},methods:{caca:function(){console.log(this.form),0==Object.keys(this.form).length?(console.log("空对象"),this.$refs["form"].resetFields()):(console.log("非空对象"),void 0==this.form.name&&this.$refs["form"].resetFields())},handleOpen:function(){this.dataSource&&(this.form=this.dataSource),this.editVisible=!0},handleUploadImg:function(t){this.form.head_img=t},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.form.roles=e.form.hasRoleIds,"edit"==e.type?Object(c["d"])(e.form,(function(t){200==t.code&&(e.getData(),e.form={},e.$message.success("修改成功"),e.editVisible=!1),t.code})):Object(c["d"])(e.form,(function(t){200==t.code&&(e.getData(),e.form={},e.$message.success("新增成功"),e.editVisible=!1),t.code}))}))},closeBtn:function(t){this.editVisible=!1,this.getData(),this.$refs[t].resetFields()},resetForm:function(t){this.$refs[t].resetFields()}}},d=u,f=(a("ebca"),a("2877")),m=Object(f["a"])(d,o,l,!1,null,"2fe8b50e",null),p=m.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"del-btn-warp"},[a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",icon:"el-icon-circle-close"},on:{click:function(e){return t.handleDelete()}}},[t._v("删除")]),a("el-dialog",{attrs:{title:"提示",visible:t.delVisible,"close-on-click-modal":!1,width:"300px",center:""},on:{"update:visible":function(e){t.delVisible=e}}},[a("div",{staticClass:"del-dialog-cnt"},[t._v("删除不可恢复，是否确定删除？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.delVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.deleteSure}},[t._v("确 定")])],1)])],1)},h=[],g={name:"del-btn",components:{},props:{getData:{type:Function,default:null},id:{default:""}},data:function(){return{editVisible:!1,delVisible:!1,form:{}}},created:function(){},computed:{},methods:{handleDelete:function(){this.delVisible=!0},deleteSure:function(){var t=this;Object(c["c"])({id:this.id},(function(e){200==e.code&&(t.$message.success("删除成功"),t.getData()),t.delVisible=!1}))}}},v=g,_=(a("c6e0"),Object(f["a"])(v,b,h,!1,null,"28faa129",null)),O=_.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-warp"},[a("el-button",{attrs:{type:"text",icon:"el-icon-star-off"},on:{click:function(e){return t.handleOpen()}}},[t._v("设置角色")]),a("el-dialog",{attrs:{title:"设置","close-on-click-modal":!1,visible:t.editVisible,width:"40%"},on:{"update:visible":function(e){t.editVisible=e}}},[a("el-form",{ref:"form",staticClass:"detalis-form",attrs:{rules:t.rules,model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"账号"}},[a("el-input",{attrs:{disabled:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"角色",prop:"roles"}},[a("el-select",{attrs:{multiple:"",placeholder:"角色选择"},model:{value:t.form.hasRoles,callback:function(e){t.$set(t.form,"hasRoles",e)},expression:"form.hasRoles"}},t._l(t.roleOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.close("form")}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("form")}}},[t._v("确 定")])],1)],1)],1)},w=[],j=(a("8e6e"),a("bd86")),k=(a("8e44"),a("7585"));function D(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function C(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?D(Object(a),!0).forEach((function(e){Object(j["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var $={name:"word",components:{vUpload:r["a"]},props:{getData:{type:Function,default:null},dataSource:{type:Object,default:null},type:{type:String,default:null}},data:function(){return{editVisible:!1,form:{},params:{id:this.id},roleOptions:[],rules:{hasRoles:[{required:!0,message:"请选择角色",trigger:"blur"}],sex:[{required:!0,message:"请填写信息",trigger:"change"}],status:[{required:!0,message:"请填写信息",trigger:"change"}],name:[{required:!0,message:"请填写信息",trigger:"change"}],password:[{required:!0,message:"请填写信息",trigger:"change"}],sort:[{required:!0,message:"请填写信息",trigger:"blur"}],words:[{required:!0,message:"请填写信息",trigger:"blur"}]}}},created:function(){},computed:{},methods:{handleOpen:function(){this.getGoodsData(),this.getAdmin(),this.editVisible=!0},getAdmin:function(){var t=this;Object(c["j"])({id:this.dataSource.id},(function(e){t.form=e.data}))},getGoodsData:function(){var t=this;Object(k["d"])({pageSize:20},(function(e){t.roleOptions=e.data}))},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;Object(c["d"])(C({},e.form,{roles:e.form.hasRoles}),(function(t){200==t.code&&(e.getData(),e.$message.success("设置角色成功"))})),e.editVisible=!1}))},close:function(t){this.editVisible=!1,this.$refs[t].resetFields()},resetForm:function(t){this.$refs[t].resetFields()}}},S=$,x=(a("39bb"),Object(f["a"])(S,y,w,!1,null,"1a167f5d",null)),V=x.exports,F=a("7ed4"),P={name:"user-list",components:{vUpload:r["a"],vScreen:s["a"],vAdd:p,vDel:O,vRole:V},data:function(){return{cur_page:1,multipleSelection:[],select_cate:"0",del_list:[],is_search:!1,editVisible:!1,delVisible:!1,loading:!0,form:{date:"",address:""},idx:-1,tableData:[],params:{page:1,pageSize:10,type:null,mobile:""},total:1,editId:"",statusParams:[{label:"全部",value:""},{label:"正常",value:1},{label:"禁用",value:0}],vipParams:[{label:"全部",value:""},{label:"是",value:1},{label:"否",value:0}],sexParams:[{label:"未设置",value:0},{label:"男",value:1},{label:"女",value:2}],typeParams:[{label:"全部"},{label:"客户端",value:1},{label:"后台",value:2}]}},beforeDestroy:function(){F["a"].$off("leftReloadData")},created:function(){var t=this;this.getData(),F["a"].$on("leftReloadData",(function(e){e&&e==t.$route.path&&(console.log("msg=".concat(JSON.stringify(e),",,,").concat(t.$route.path)),t.params.name="",t.params.resetOptions=!0,t.params.resetOptions=!1,t.params.page=1,t.loading=!0,t.getData())}))},computed:{},methods:{handleCurrentChange:function(t){this.params.page=t,this.getData()},jumpDetails:function(t){},handleEditShow:function(t,e){var a=this;Object(c["e"])({id:t.id,status:e},(function(t){200==t.code&&(a.getData(),a.$message.success("修改状态成功"))}))},getData:function(t){var e=this;t&&(this.params.page=1),Object(c["k"])(this.params,(function(t){e.tableData=t.data.list,e.total=t.data.count,e.loading=!1}))},search:function(){this.is_search=!0},typeFormatter:function(t,e){return 1==t.platform_flag?"客户端":2==t.platform_flag?"后台":void 0},sexFormatter:function(t,e){return"1"==t.sex?"男性":"2"==t.sex?"女性":"未知"},vipFormatter:function(t,e){return 1==t.is_vip?"是":"否"},filterTag:function(t,e){return e.tag===t},handleParams:function(t,e){this.params.page=1,this.params[e]=t,this.getData()},handleSelectionChange:function(t){this.multipleSelection=t},saveEdit:function(){this.$set(this.tableData,this.idx,this.form),this.editVisible=!1,this.$message.success("修改第 ".concat(this.idx+1," 行成功"))},deleteRow:function(){this.tableData.splice(this.idx,1),this.$message.success("删除成功"),this.delVisible=!1}}},R=P,q=(a("89cd"),Object(f["a"])(R,n,i,!1,null,null,null));e["default"]=q.exports},"89cd":function(t,e,a){"use strict";var n=a("5fc7"),i=a.n(n);i.a},c6e0:function(t,e,a){"use strict";var n=a("70c9"),i=a.n(n);i.a},d015:function(t,e,a){},d2f3:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s})),a.d(e,"i",(function(){return r})),a.d(e,"g",(function(){return o})),a.d(e,"m",(function(){return l})),a.d(e,"k",(function(){return c})),a.d(e,"d",(function(){return u})),a.d(e,"j",(function(){return d})),a.d(e,"e",(function(){return f})),a.d(e,"c",(function(){return m})),a.d(e,"l",(function(){return p})),a.d(e,"n",(function(){return b})),a.d(e,"h",(function(){return h})),a.d(e,"f",(function(){return g}));var n=a("ed08");function i(t,e){return Object(n["a"])("/api/admin/member/account_del/".concat(t.id),"post",t).then((function(t){t&&e&&e(t)}))}function s(t,e){return console.log("do_account_edit=".concat(JSON.stringify(t))),Object(n["a"])("/api/admin/member/account_edit/".concat(t.id),"post",t).then((function(t){t&&e&&e(t)}))}function r(t,e){return Object(n["a"])("/api/admin/member/account_list","get",t).then((function(t){t&&e&&e(t)}))}function o(t,e){return Object(n["a"])("/api/admin/member/edit","post",t).then((function(t){t&&e&&e(t)}))}function l(t,e){return Object(n["a"])("/api/admin/member/nexus","get",t).then((function(t){t&&e&&e(t)}))}function c(t,e){return Object(n["a"])("/api/admin/admin/list","get",t).then((function(t){t&&e&&e(t)}))}function u(t,e){return Object(n["a"])("/api/admin/admin/save","post",t).then((function(t){t&&e&&e(t)}))}function d(t,e){return Object(n["a"])("/api/admin/admin/info","get",t).then((function(t){t&&e&&e(t)}))}function f(t,e){return Object(n["a"])("/api/admin/admin/set","get",t).then((function(t){t&&e&&e(t)}))}function m(t,e){return Object(n["a"])("/api/admin/admin/del","get",t).then((function(t){t&&e&&e(t)}))}function p(t,e){return Object(n["a"])("/api/admin/member/list","get",t).then((function(t){t&&e&&e(t)}))}function b(t,e){return Object(n["a"])("/api/admin/member/set_vip","post",t).then((function(t){t&&e&&e(t)}))}function h(t,e){return Object(n["a"])("/api/admin/member/set","get",t).then((function(t){t&&e&&e(t)}))}function g(t,e){return Object(n["a"])("/api/admin/member/del","get",t).then((function(t){t&&e&&e(t)}))}},ebca:function(t,e,a){"use strict";var n=a("2062"),i=a.n(n);i.a},f37d:function(t,e,a){}}]);