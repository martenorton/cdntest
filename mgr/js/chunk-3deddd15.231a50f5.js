(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3deddd15"],{"0505":function(t,e,a){"use strict";a.d(e,"g",(function(){return n})),a.d(e,"f",(function(){return o})),a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return s})),a.d(e,"d",(function(){return r})),a.d(e,"e",(function(){return c})),a.d(e,"c",(function(){return u}));var i=a("ed08");function n(t,e){return Object(i["a"])("/api/admin/advertise/list","get",t).then((function(t){t&&e&&e(t)}))}function o(t,e){return Object(i["a"])("/api/admin/advertise/set","get",t).then((function(t){t&&e&&e(t)}))}function l(t,e){return Object(i["a"])("/api/admin/advertise/save","post",t).then((function(t){t&&e&&e(t)}))}function s(t,e){return Object(i["a"])("/api/admin/advertise/del","get",t).then((function(t){t&&e&&e(t)}))}function r(t,e){return Object(i["a"])("/api/admin/under_advertise/list","get",t).then((function(t){t&&e&&e(t)}))}function c(t,e){return Object(i["a"])("/api/admin/under_advertise/set","get",t).then((function(t){t&&e&&e(t)}))}function u(t,e){return Object(i["a"])("/api/admin/under_advertise/del","get",t).then((function(t){t&&e&&e(t)}))}},"414d":function(t,e,a){"use strict";var i=a("9da0"),n=a.n(i);n.a},"5e01":function(t,e,a){},"66c7":function(t,e,a){},"7c27":function(t,e,a){"use strict";var i=a("5e01"),n=a.n(i);n.a},"9da0":function(t,e,a){},d9e4:function(t,e,a){"use strict";var i=a("66c7"),n=a.n(i);n.a},fd3a:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"novel-featured-warp"},[a("div",{staticClass:"container"},[a("div",{staticClass:"head-nav"},[a("span",{staticClass:"title"},[t._v("广告列表")]),a("v-add",{attrs:{getData:t.getData}})],1),a("div",{staticClass:"handle-box"},[a("div",{staticClass:"handle-item"},[a("span",{staticClass:"label"},[t._v("关键字:")]),a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"广告标题"},model:{value:t.params.title,callback:function(e){t.$set(t.params,"title",e)},expression:"params.title"}}),a("el-select",{attrs:{placeholder:"广告位置"},model:{value:t.params.position,callback:function(e){t.$set(t.params,"position",e)},expression:"params.position"}},[a("el-option",{key:"0",attrs:{label:"全部",value:""}}),a("el-option",{key:"1",attrs:{label:"首页",value:1}}),a("el-option",{key:"2",attrs:{label:"频道",value:2}}),a("el-option",{key:"3",attrs:{label:"精选推荐",value:3}}),a("el-option",{key:"4",attrs:{label:"精选热点",value:4}}),a("el-option",{key:"5",attrs:{label:"精选发现",value:5}}),a("el-option",{key:"6",attrs:{label:"我的",value:6}}),a("el-option",{key:"7",attrs:{label:"视频详情",value:7}}),a("el-option",{key:"8",attrs:{label:"任务中心",value:8}}),a("el-option",{key:"9",attrs:{label:"演员详情",value:9}}),a("el-option",{key:"10",attrs:{label:"分类页广告",value:10}}),a("el-option",{key:"11",attrs:{label:"新增测试用地址",value:11}})],1)],1),a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.getData(!0)}}},[t._v("搜索")])],1),a("el-table",{staticClass:"table",attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",width:"100"}}),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),a("el-table-column",{attrs:{prop:"img",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"100px"},attrs:{src:t.row.img,"preview-src-list":[""+t.row.img]}})]}}])}),a("el-table-column",{attrs:{prop:"position",label:"广告位置",formatter:t.positionFormatter}}),a("el-table-column",{attrs:{prop:"action_method",label:"链接方式",formatter:t.methodFormatter}}),a("el-table-column",{attrs:{prop:"action",label:"链接地址"}}),a("el-table-column",{attrs:{prop:"clicks",label:"点击次数"}}),a("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("v-add",{staticClass:"cell-item",attrs:{getData:t.getData,dataSource:e.row||null,type:"edit"}}),a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.handleEditShow(e.row)}}},[t._v("下架广告")])]}}])}),a("el-table-column",{attrs:{label:"删除",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("v-del",{attrs:{getData:t.getData,id:e.row.id}})]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.params.pageSize||20},on:{"current-change":t.handleCurrentChange}})],1)],1)])},n=[],o=a("0505"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-ranking-warp"},[t.type?t._e():a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.handleOpen()}}},[t._v(t._s("edit"==t.type?"编辑":"新增")+"标签")]),"edit"==t.type?a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(e){return t.handleOpen()}}},[t._v("编辑")]):t._e(),a("el-dialog",{attrs:{title:"edit"==t.type?"编辑":"新增",visible:t.editVisible,width:"40%","close-on-click-modal":!1},on:{"update:visible":function(e){t.editVisible=e}}},[a("el-form",{ref:"ruleForm",staticClass:"detalis-form",attrs:{rules:t.rules,model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"广告标题",prop:"title"}},[a("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"链接方式",prop:"action_method"}},[a("el-select",{attrs:{placeholder:"选择链接方式"},model:{value:t.form.action_method,callback:function(e){t.$set(t.form,"action_method",e)},expression:"form.action_method"}},[a("el-option",{key:"1",attrs:{label:"内链",value:1}}),a("el-option",{key:"2",attrs:{label:"外链",value:2}})],1)],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"选择状态"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-option",{key:"1",attrs:{label:"禁用",value:0}}),a("el-option",{key:"2",attrs:{label:"启用",value:1}})],1)],1),a("el-form-item",{attrs:{label:"链接地址",prop:"action"}},[a("el-input",{model:{value:t.form.action,callback:function(e){t.$set(t.form,"action",e)},expression:"form.action"}})],1),a("el-form-item",{attrs:{label:"广告位置",prop:"position"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.position,callback:function(e){t.$set(t.form,"position",e)},expression:"form.position"}},t._l(t.list,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:Number(e)}})})),1)],1),0!=t.form.is_module?a("el-form-item",{attrs:{label:"图片",prop:"img"}},[a("v-upload",{attrs:{default_img:t.form.img},on:{input:t.handleUploadImg}})],1):t._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.closeBtn("ruleForm")}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1)],1)},s=[],r=a("8e44"),c=a("3dda"),u=(a("470b"),{components:{vUpload:c["a"]},props:{getData:{type:Function,default:null},type:{type:String,default:null},dataSource:{type:Object,default:null}},data:function(){return{editVisible:!1,form:{type_id:"1"},arrData:[],attOptions:[],positionInfo:{},param:{module:"advertise"},rules:{title:[{required:!0,message:"请填写标题",trigger:"blur"}],status:[{required:!0,message:"请填写状态",trigger:"blur"}],sort:[{required:!0,message:"请填写排序",trigger:"blur"}],img:[{required:!0,message:"请填写图片logo",trigger:"blur"}],position:[{required:!0,message:"请填写广告位置",trigger:"blur"}],action:[{required:!0,message:"请填写链接地址",trigger:"blur"}],action_method:[{required:!0,message:"请填写链接方式",trigger:"blur"}]},list:[]}},created:function(){},computed:{},updated:function(){this.attOptions=this.list},methods:{getConfig:function(){var t=this;Object(r["b"])({},(function(e){(e.code=200)&&(t.list=e.data.position_advertise,console.log(t.list,"下拉"))}))},handleOpen:function(){this.getConfig(),this.editVisible=!0,this.form={},"edit"==this.type&&(this.form=JSON.parse(JSON.stringify(this.dataSource)))},handleUploadImg:function(t){this.form.img=t,this.form=JSON.parse(JSON.stringify(this.form))},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;"edit"==e.type?Object(o["a"])(e.form,(function(t){200==t.code&&(e.getData(),e.$message.success("修改成功"))})):Object(o["a"])(e.form,(function(t){200==t.code&&(e.getData(),e.$message.success("成功"))})),e.form={},e.editVisible=!1}))},resetForm:function(t){this.$refs[t].resetFields()},closeBtn:function(t){this.$refs[t].resetFields(),this.editVisible=!1}}}),d=u,p=(a("7c27"),a("2877")),f=Object(p["a"])(d,l,s,!1,null,null,null),m=f.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"del-btn-warp"},[a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",icon:"el-icon-circle-close"},on:{click:function(e){return t.handleDelete()}}},[t._v("删除")]),a("el-dialog",{attrs:{title:"提示",visible:t.delVisible,width:"300px",center:"","close-on-click-modal":!1},on:{"update:visible":function(e){t.delVisible=e}}},[a("div",{staticClass:"del-dialog-cnt"},[t._v("删除不可恢复，是否确定删除？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.delVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.deleteSure}},[t._v("确 定")])],1)])],1)},g=[],h={name:"del-btn",components:{},props:{getData:{type:Function,default:null},id:{default:""}},data:function(){return{editVisible:!1,delVisible:!1,form:{}}},created:function(){},computed:{},methods:{handleDelete:function(){this.delVisible=!0},deleteSure:function(){var t=this;Object(o["b"])({id:this.id},(function(e){200==e.code&&(t.$message.success("删除成功"),t.getData()),t.delVisible=!1}))}}},v=h,y=(a("d9e4"),Object(p["a"])(v,b,g,!1,null,"18b8e5c6",null)),k=y.exports,_={name:"novel-featured-warp",components:{vAdd:m,vDel:k},data:function(){return{delVisible:!1,total:1,params:{title:"",position:"",status:"1"},tableData:[]}},created:function(){this.getData()},computed:{},methods:{handleDelete:function(t){var e=this;this.$confirm("是否删除?","提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then((function(){var a=t.id;console.log(a,"id"),Object(o["b"])(a).then((function(t){e.$message({type:"success",message:"删除成功"}),e.getData()}))})).catch((function(){e.$message({type:"warning",message:"取消成功"}),e.getData()}))},handleCurrentChange:function(t){this.params.page=t,this.getData()},methodFormatter:function(t,e){return 1==t.action_method?"内链":"外链"},positionFormatter:function(t,e){return"1"==t.position?"首页":"2"==t.position?"频道":"3"==t.position?"精选推荐":"4"==t.position?"精选热点":"5"==t.position?"精选发现":"6"==t.position?"我的":"7"==t.position?"视频详情":"8"==t.position?"任务中心":"9"==t.position?"演员详情":"10"==t.position?"分类页广告":"11"==t.position?"新增测试用地址":void 0},getData:function(){var t=this;Object(o["g"])(this.params,(function(e){200==e.code&&(t.tableData=e.data.list,t.total=e.data.count)}))},handleEditShow:function(t,e){var a=this;Object(o["f"])({id:t.id,status:1},(function(t){200==t.code&&(a.getData(),a.$message.success("下架成功"))}))},handleJump:function(t,e){this.$router.push({path:"/novel/featured_book_list",query:{top_id:e.id,position:e.position}})}}},w=_,O=(a("414d"),Object(p["a"])(w,i,n,!1,null,null,null));e["default"]=O.exports}}]);