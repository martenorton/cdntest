(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a29bddb"],{"0a44":function(e,t,a){},1190:function(e,t,a){"use strict";var i=a("d1e8"),n=a.n(i);n.a},"662f":function(e,t,a){},"66ab":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"novel-book-warp"},[a("div",{staticClass:"container"},[a("div",{staticClass:"head-nav"},[a("span",{staticClass:"title"},[e._v("功能列表")]),a("v-add",{attrs:{getData:e.getData}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"table",staticStyle:{"margin-bottom":"20px"},attrs:{data:e.tableData,border:"","row-key":"id","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"name",label:"菜单名字",width:"120"}}),a("el-table-column",{attrs:{prop:"api_path",label:"菜单对应api路径"}}),a("el-table-column",{attrs:{prop:"id",label:"权限id",width:"70"}}),a("el-table-column",{attrs:{prop:"pid",label:"父级id"}}),a("el-table-column",{attrs:{prop:"icon",label:"图标",width:"50"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("i",{class:e.row.icon})]}}])}),a("el-table-column",{attrs:{prop:"sort",label:"排序"}}),a("el-table-column",{attrs:{prop:"is_menu",label:"是否是菜单",formatter:e.menuFormatter}}),a("el-table-column",{attrs:{prop:"is_show",label:"是否显示",formatter:e.showFormatter}}),a("el-table-column",{attrs:{prop:"is_check",label:"是否权限认证",formatter:e.checkFormatter}}),a("el-table-column",{attrs:{label:"操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("v-add",{attrs:{type:"edit",id:t.row.id,dataSource:t.row||null,getData:e.getData}})]}}])}),a("el-table-column",{attrs:{label:"删除",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("v-del",{attrs:{getData:e.getData,id:t.row.id}})]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.params.pageSize||10},on:{"current-change":e.handleCurrentChange}})],1)],1)])},n=[],l=a("d126"),o=a("3dda"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-book-btn-warp"},[e.type?e._e():a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:function(t){return e.handleOpen()}}},[e._v("新增")]),"edit"==e.type?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.handleOpen()}}},[e._v("编辑")]):e._e(),"txt"!=e.type?a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"edit"==e.type?"编辑":"新增","close-on-click-modal":!1,visible:e.editVisible,width:"40%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"detalis-form",attrs:{model:e.form,rules:e.rules,"label-width":"145px"}},["edit"==this.type?a("el-form-item",{attrs:{label:"权限id"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1):e._e(),a("el-form-item",{attrs:{label:"父级id",prop:"pid"}},[a("el-select",{model:{value:e.form.pid,callback:function(t){e.$set(e.form,"pid",t)},expression:"form.pid"}},e._l(e.options,(function(t,i){return a("el-option",{key:i,attrs:{label:t.name,value:t.id},on:{change:function(t){return e.getoptions()}}})})),1)],1),a("el-form-item",{attrs:{label:"权限名称",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"图标"}},[a("el-input",{model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}})],1),a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1),a("el-form-item",{attrs:{label:"客户端路由"}},[a("el-input",{model:{value:e.form.client_router,callback:function(t){e.$set(e.form,"client_router",t)},expression:"form.client_router"}})],1),a("el-form-item",{attrs:{label:"权限路径",prop:"api_path"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.api_path,callback:function(t){e.$set(e.form,"api_path",t)},expression:"form.api_path"}})],1),a("el-form-item",{attrs:{label:"是否是菜单",prop:"is_menu"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择是否为菜单"},model:{value:e.form.is_menu,callback:function(t){e.$set(e.form,"is_menu",t)},expression:"form.is_menu"}},[a("el-option",{key:"1",attrs:{label:"是",value:1}}),a("el-option",{key:"2",attrs:{label:"否",value:0}})],1)],1),a("el-form-item",{attrs:{label:"是否显示",prop:"is_show"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择状态"},model:{value:e.form.is_show,callback:function(t){e.$set(e.form,"is_show",t)},expression:"form.is_show"}},[a("el-option",{key:"2",attrs:{label:"是",value:1}}),a("el-option",{key:"1",attrs:{label:"否",value:0}})],1)],1),a("el-form-item",{attrs:{label:"是否权限认证",prop:"is_check"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择状态"},model:{value:e.form.is_check,callback:function(t){e.$set(e.form,"is_check",t)},expression:"form.is_check"}},[a("el-option",{key:"2",attrs:{label:"是",value:1}}),a("el-option",{key:"1",attrs:{label:"否",value:0}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.closeBtn("ruleForm")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1):e._e()],1)},s=[],c=(a("8e6e"),a("456d"),a("ac6a"),a("bd86")),u=(a("c5f6"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"check-box-item"},[a("el-checkbox-group",{on:{change:e.handleCheckedPermissionChange},model:{value:e.checkedPermission,callback:function(t){e.checkedPermission=t},expression:"checkedPermission"}},e._l(e.permissionInfo,(function(t,i){return a("el-checkbox",{key:i,attrs:{checked:-1!=e.permission.indexOf(t.id),label:t.id}},[e._v(e._s(t.name))])})),1)],1)}),d=[],p={props:{permission:{type:Array,default:[]}},data:function(){return{options:[],value:[],list:[],loading:!1,checkedPermission:[],permissionInfo:[]}},watch:{},computed:{},mounted:function(){},methods:{handleCheckedPermissionChange:function(e){this.$emit("change",this.checkedPermission)}}},f=p,m=(a("734b"),a("2877")),h=Object(m["a"])(f,u,d,!1,null,null,null),b=h.exports;function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){Object(c["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={name:"basetable",components:{vUpload:o["a"],PermCheckBox:b},props:{getData:{type:Function,default:null},type:{type:String,default:null},dataSource:{type:Object,default:null},props:{type:Object,default:function(){return{value:"pid",label:"name",children:"son"}}},value:{type:Number,default:function(){return null}},clearable:{type:Boolean,default:function(){return!0}},accordion:{type:Boolean,default:function(){return!1}}},data:function(){return{rules:{api_path:[{required:!0,message:"请填写权限路径",trigger:"change"}],sex:[{required:!0,message:"请填写性别",trigger:"change"}],is_menu:[{required:!0,message:"请填写是否为菜单",trigger:"change"}],name:[{required:!0,message:"请填写权限名称",trigger:"change"}],is_show:[{required:!0,message:"请填写是否显示",trigger:"change"}],is_check:[{required:!0,message:"请填写是否权限认证",trigger:"change"}],index:[{required:!0,message:"请填写对应路由",trigger:"change"}],sort:[{required:!0,message:"请填写排序",trigger:"change"}]},editVisible:!1,loading:!0,attOptions:[],form:{},valueId:"",valueTitle:"",permission:[],defaultExpandedKey:[],options:[]}},created:function(){},mounted:function(){},computed:{},methods:{handleOpen:function(){this.editVisible=!0,this.form={},"edit"==this.type&&(this.form=this.dataSource),this.loading=!1,this.getAttData()},getAttData:function(){var e=this;Object(l["a"])({},(function(t){e.attOptions=t.data,e.options=t.data}))},handleUploadImg:function(e){this.form.icon=e,this.form=JSON.parse(JSON.stringify(this.form))},closeBtn:function(e){this.editVisible=!1,this.form={},this.getData(),this.$refs[e].resetFields()},getoptions:function(){console.log(item)},submitForm:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return console.log("error submit!!"),!1;t.form.pid?(console.log(t.options),t.options.map((function(e){e.id==t.form.pid&&(t.form.level=e.level+1)}))):t.form.level=0,Object(l["d"])(v({},t.form,{pid:t.form.pid||0}),(function(e){t.editVisible=!1,200==e.code&&"edit"!=t.type?(t.$message.success("新增成功"),t.getData()):(t.$message.success("编辑成功"),t.getData())})),t.$refs[e].resetFields()}))},initHandle:function(){this.valueId&&(this.valueTitle=this.$refs.selectTree.getNode(this.valueId).data[this.props.label],this.$refs.selectTree.setCurrentKey(this.valueId),this.defaultExpandedKey=[this.valueId]),this.$nextTick((function(){document.querySelectorAll(".el-scrollbar .el-select-dropdown__wrap")[0],document.querySelectorAll(".el-scrollbar .el-scrollbar__bar")}))},handleNodeClick:function(e){this.valueTitle=e[this.props.label],this.valueId=e[this.props.value],this.$emit("getValue",this.valueId),this.defaultExpandedKey=[]},clearHandle:function(){this.valueId=null,this.valueTitle="",this.defaultExpandedKey=[],this.clearSelected(),this.$emit("getValue",null)},clearSelected:function(){var e=document.querySelectorAll("#tree-option .el-tree-node");e.forEach((function(e){return e.classList.remove("is-current")}))}},watch:{value:function(){this.valueId=this.value,this.initHandle()}}},_=y,k=(a("906e"),Object(m["a"])(_,r,s,!1,null,null,null)),w=k.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"del-btn-warp"},[a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",icon:"el-icon-circle-close"},on:{click:function(t){return e.handleDelete()}}},[e._v("删除")]),a("el-dialog",{attrs:{title:"提示",visible:e.delVisible,width:"300px",center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.delVisible=t}}},[a("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteSure}},[e._v("确 定")])],1)])],1)},O=[],S={name:"del-btn",components:{},props:{getData:{type:Function,default:null},id:{default:""}},data:function(){return{editVisible:!1,delVisible:!1,form:{}}},created:function(){},computed:{},methods:{handleDelete:function(){this.delVisible=!0},deleteSure:function(){var e=this;Object(l["b"])({id:this.id},(function(t){200==t.code&&(e.$message.success("删除成功"),e.getData()),e.delVisible=!1}))}}},D=S,j=(a("1190"),Object(m["a"])(D,x,O,!1,null,"62c6add5",null)),C=j.exports,$={name:"basetable",components:{vUpload:o["a"],vAdd:w,vDel:C},data:function(){return{loading:!0,cur_page:1,multipleSelection:[],del_list:[],editVisible:!1,delVisible:!1,form:{name:"",date:"",address:""},tableData:[],params:{page:1,pageSize:10},editId:"",typeOptions:[],total:1}},filters:{},created:function(){this.getData()},computed:{},methods:{showFormatter:function(e,t){return 1==e.is_show?"是":"否"},menuFormatter:function(e,t){return 1==e.is_menu?"是":"否"},checkFormatter:function(e,t){return 1==e.is_check?"是":"否"},handleCurrentChange:function(e){this.params.page=e,this.getData()},getData:function(){var e=this;Object(l["c"])(this.params,(function(t){if(200==t.code){e.loading=!1,e.total=t.data.count;var a=t.data;e.tableData=a&&a.map((function(e,t){return e.son&&(e.children=e.son),e}))}}))}}},V=$,P=(a("99cd"),Object(m["a"])(V,i,n,!1,null,null,null));t["default"]=P.exports},"707f":function(e,t,a){},"734b":function(e,t,a){"use strict";var i=a("662f"),n=a.n(i);n.a},"906e":function(e,t,a){"use strict";var i=a("707f"),n=a.n(i);n.a},"99cd":function(e,t,a){"use strict";var i=a("0a44"),n=a.n(i);n.a},d126:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return l})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return r}));var i=a("ed08");function n(e,t){return Object(i["a"])("/api/admin/permission/list","get",e).then((function(e){e&&t&&t(e)}))}function l(e,t){return Object(i["a"])("/api/admin/permission/save","post",e).then((function(e){e&&t&&t(e)}))}function o(e,t){return Object(i["a"])("/api/admin/permission/del","get",e).then((function(e){e&&t&&t(e)}))}function r(e,t){return Object(i["a"])("/api/admin/permission/all","get",e).then((function(e){e&&t&&t(e)}))}},d1e8:function(e,t,a){}}]);