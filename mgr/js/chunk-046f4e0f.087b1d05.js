(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-046f4e0f"],{"02d8":function(t,e,a){"use strict";var n=a("f776"),i=a.n(n);i.a},"0855":function(t,e,a){},"0add":function(t,e,a){},b169:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"novel-banner-warp"},[a("div",{staticClass:"container"},[a("div",{staticClass:"tabox"},[a("el-radio-group",{staticStyle:{"margin-bottom":"20px"},on:{change:function(e){return t.changetab(t.radio)}},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},t._l(t.tab,(function(e){return a("el-radio-button",{key:e.code,attrs:{label:e.code}},[t._v(t._s(e.name))])})),1)],1),a("div",{staticClass:"head-nav"},[a("span",{staticClass:"title"},[t._v("轮播/广告列表")]),a("div",{staticClass:"handle-btn-box"},[a("v-add",{attrs:{getData:t.getData,radio:t.radio,getdatalist:t.getdatalist}})],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:""}},["bfy"!=t.params.code?a("el-table-column",{attrs:{prop:"title_name",label:"标题栏"}}):t._e(),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"img",label:"图片",width:"350"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"320px",height:"140px"},attrs:{src:t.row.img}})]}}])}),a("el-table-column",{attrs:{prop:"action_method",label:"链接方式",formatter:t.methodFormatter}}),a("el-table-column",{attrs:{prop:"action",label:"跳转链接"}}),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"table-cell",staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[1==e.row.status?a("a",{staticClass:"icon icon-show",on:{click:function(a){return t.handleEditShow(e.row,0)}}},[t._v("显示")]):t._e(),0==e.row.status?a("a",{staticClass:"icon icon-none",on:{click:function(a){return t.handleEditShow(e.row,1)}}},[t._v("隐藏")]):t._e()])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("v-add",{staticClass:"cell-item",attrs:{getdatalist:t.getdatalist,getData:t.getData,dataSource:e.row||null,type:"edit",radio:t.radio}})]}}])}),a("el-table-column",{attrs:{label:"删除",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("v-del",{attrs:{getData:t.getData,id:e.row.id,radio:t.radio,getdatalist:t.getdatalist}})]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.params.pageSize||20},on:{"current-change":t.handleCurrentChange}})],1)],1)])},i=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),r=(a("28a5"),a("6b54"),a("f6df")),l=a("d07e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-ranking-warp"},[t.type?t._e():a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.handleOpen()}}},[t._v(t._s("edit"==t.type?"编辑":"新增")+"轮播/广告")]),"edit"==t.type?a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(e){return t.handleOpen()}}},[t._v("编辑")]):t._e(),a("el-dialog",{attrs:{title:"edit"==t.type?"编辑":"新增","close-on-click-modal":!1,visible:t.editVisible,width:"40%",close:"dalongs"},on:{"update:visible":function(e){t.editVisible=e}}},[a("el-form",{ref:"ruleForm",staticClass:"detalis-form",attrs:{rules:t.rules,model:t.form,"label-width":"120px"}},["bfy"!=t.radio?a("el-form-item",{attrs:{label:"标题栏",prop:"title_id"}},[a("el-select",{attrs:{placeholder:"选择标题"},model:{value:t.form.title_id,callback:function(e){t.$set(t.form,"title_id",e)},expression:"form.title_id"}},t._l(t.titlelist,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1):t._e(),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请填写名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"封面",prop:"imgs"}},[a("v-upload",{attrs:{default_img:t.form.imgs},on:{srclinks:t.getlinks,input:t.handleUploadImg,uploadload:t.getupload}})],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-radio",{attrs:{label:1},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[t._v("启用")]),a("el-radio",{attrs:{label:0},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[t._v("禁用")])],1),a("el-form-item",{attrs:{label:"链接方式",prop:"action_method"}},["bfy"!=t.radio?a("el-radio",{attrs:{label:1},model:{value:t.form.action_method,callback:function(e){t.$set(t.form,"action_method",e)},expression:"form.action_method"}},[t._v("内部视频")]):t._e(),a("el-radio",{attrs:{label:2},model:{value:t.form.action_method,callback:function(e){t.$set(t.form,"action_method",e)},expression:"form.action_method"}},[t._v("外部链接")])],1),a("el-form-item",{attrs:{label:"链接地址",prop:"action"}},[a("el-input",{attrs:{placeholder:"bfy"!=t.radio?"如果是内部链接，填写视频ID，外部链接填写http或https链接":"外部链接填写http或https链接"},model:{value:t.form.action,callback:function(e){t.$set(t.form,"action",e)},expression:"form.action"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.closeBtn("ruleForm")}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1)],1)},c=[],d=a("3dda"),u={name:"basetable",components:{vUpload:d["a"]},props:{getdatalist:{type:Function,default:null},getData:{type:Function,default:null},type:{type:String,default:null},radio:{type:String,default:null},dataSource:{type:Object,default:null}},data:function(){return{editVisible:!1,form:{},tableDatas:[],positionInfo:[],param:{module:"banner"},titlelist:[],rules:{title_id:[{required:!0,message:"请选择标题栏",trigger:"blur"}],name:[{required:!0,message:"请填写名称",trigger:"blur"},{pattern:/^[^\s]*$/,message:"不能输入空格"},{pattern:/^\S{1,50}$/,message:"请输入1-50位字符"}],imgs:[{required:!0,message:"请上传封面",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}],action_method:[{required:!0,message:"请选择链接方式",trigger:"blur"}],action:[{required:!0,message:"请填写链接地址",trigger:"blur"}]},uploding:"",img_domain:"",video_domain:"",sctp:""}},created:function(){this.positionInfo=JSON.parse(window.localStorage.getItem("_position"))},computed:{},methods:{getlinks:function(t){this.sctp=t},getselect_title:function(){var t=this;Object(r["g"])({code:this.radio},(function(e){200==e.code&&(t.titlelist=e.data)}))},getupload:function(t){this.uploding=t},handleOpen:function(){this.img_domain=localStorage.getItem("img_domain"),this.video_domain=localStorage.getItem("video_domain"),this.editVisible=!0,this.form={},this.form.code=this.radio,"edit"==this.type&&(console.log(this.dataSource),this.dataSource.imgs=this.dataSource.img,this.form=JSON.parse(JSON.stringify(this.dataSource))),"bfy"!=this.radio&&this.getselect_title()},handleUploadImg:function(t){this.form.imgs=t,this.form=JSON.parse(JSON.stringify(this.form))},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;if(e.sctp)e.form.img=e.sctp;else{var a=localStorage.getItem("img_domain");e.form.img=e.form.oldimg.split(a)[1]}0==e.uploding?"edit"==e.type?"bfy"==e.radio?Object(r["b"])(e.form,(function(t){200==t.code&&(e.getdatalist(),e.$message.success("修改成功"),e.form={},e.editVisible=!1,e.sctp="")})):Object(r["e"])(e.form,(function(t){200==t.code&&(e.getData(),e.$message.success("修改成功"),e.form={},e.editVisible=!1,e.sctp="")})):"bfy"==e.radio?Object(r["b"])(e.form,(function(t){200==t.code&&(console.log("bgy"),e.getdatalist(),e.$message.success("成功"),e.form={},e.editVisible=!1,e.sctp="")})):(e.form.code="video",Object(r["e"])(e.form,(function(t){200==t.code&&(console.log(t),e.getData(),e.$message.success("成功"),e.form={},e.editVisible=!1,e.sctp="")}))):e.$message.error("图片正在上传中")}))},resetForm:function(t){this.$refs[t].resetFields()},closeBtn:function(t){this.$refs[t].resetFields(),this.editVisible=!1}}},f=u,m=(a("cd25"),a("2877")),p=Object(m["a"])(f,s,c,!1,null,null,null),g=p.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"del-btn-warp"},[a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",icon:"el-icon-circle-close"},on:{click:function(e){return t.handleDelete()}}},[t._v("删除")]),a("el-dialog",{attrs:{title:"提示",visible:t.delVisible,width:"300px","close-on-click-modal":!1,center:""},on:{"update:visible":function(e){t.delVisible=e}}},[a("div",{staticClass:"del-dialog-cnt"},[t._v("删除不可恢复，是否确定删除？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.delVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.deleteSure}},[t._v("确 定")])],1)])],1)},h=[],v={name:"del-btn",components:{},props:{getdatalist:{type:Function,default:null},getData:{type:Function,default:null},id:{default:""},radio:{type:String,default:null}},data:function(){return{editVisible:!1,delVisible:!1,form:{}}},created:function(){},computed:{},methods:{handleDelete:function(){this.delVisible=!0},deleteSure:function(){var t=this;Object(r["c"])({id:this.id},(function(e){200==e.code&&(t.$message.success("删除成功"),"bfy"==t.radio?t.getdatalist():t.getData()),t.delVisible=!1}))}}},_=v,y=(a("be66"),Object(m["a"])(_,b,h,!1,null,"d59546e8",null)),O=y.exports;function S(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function j(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?S(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var w={name:"banner",components:{vAdd:g,vDel:O},data:function(){return{url:"./vuetable.json",cur_page:1,img_domain:"",video_domain:"",tableDatas:[],form:{},tableData:[],total:1,positionInfo:[],loading:!0,params:{page:1,pageSize:10,code:"index"},radio:"index",tab:[]}},created:function(){this.getData(),this.img_domain=localStorage.getItem("img_domain"),console.log(this.img_domain),this.video_domain=localStorage.getItem("video_domain")},computed:{},methods:{getdatalist:function(){var t=this;Object(r["a"])(this.params,(function(e){200==e.code&&(t.tableData=e.data,t.tableData.map((function(e){t.getnewimgs(e)})),t.total=e.data.count,t.loading=!1)}))},getnewimgs:function(t){var e=a("3452"),n=a("27ae").Base64;a("30dc");function i(t,a){var n=e.enc.Utf8.parse(o),i=e.enc.Utf8.parse(a),r=e.AES.decrypt(t,n,{iv:i,padding:e.pad.Pkcs7});return r.toString(e.enc.Utf8)}var o=localStorage.getItem("img_key"),r=new XMLHttpRequest;r.open("GET",t.img),r.send(null),r.onload=function(e){var a=e.target,o=JSON.parse(n.decode(a.responseText)),r=i(o.value,o.iv),l=r.split(","),s="data:"+l[0]+";base64,"+l[1];t.img=s}},changetab:function(t){var e=this;this.radio=t,this.params.code=t,this.loading=!0,"bfy"==t?this.getdatalist():Object(r["d"])(this.params,(function(t){200==t.code&&(e.tableData=t.data.list,e.tableData.map((function(t){t.oldimg=t.img,e.getnewimgs(t)})),e.total=t.data.count,e.loading=!1)}))},handleCurrentChange:function(t){this.params.page=t,this.getData()},methodFormatter:function(t,e){return 1==t.action_method?"内部视频":"外部链接"},getData:function(t){var e=this;t&&(get_photo_tab,this.params.page=1),Object(l["c"])(this.params,(function(t){200==t.code&&(e.tab=t.data,e.tab.push({code:"bfy",name:"播放页"}),Object(r["d"])(e.params,(function(t){200==t.code&&(e.tableData=t.data.list,e.tableData.map((function(t){e.getnewimgs(t),t.oldimg=t.img})),e.total=t.data.count,e.loading=!1)})))}))},handleEditShow:function(t,e){var a=this;Object(r["f"])(j({},t,{status:e}),(function(t){a.$message.success("成功"),console.log(a.params.code),"bfy"==a.params.code?(console.log("pyf"),a.getdatalist()):(console.log("nopyf"),a.getData())}))},positionFromatter:function(t,e){var a="";return this.positionInfo.map((function(e,n){t.position==e.value&&(a=e.label)})),a}}},k=w,D=(a("02d8"),Object(m["a"])(k,n,i,!1,null,null,null));e["default"]=D.exports},be66:function(t,e,a){"use strict";var n=a("0add"),i=a.n(n);i.a},cd25:function(t,e,a){"use strict";var n=a("0855"),i=a.n(n);i.a},d07e:function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return r})),a.d(e,"d",(function(){return l})),a.d(e,"e",(function(){return s}));var n=a("ed08");function i(t,e){return Object(n["a"])("/api/admin/common/tab","get",t).then((function(t){t&&e&&e(t)}))}function o(t,e){return Object(n["a"])("/api/admin/category/list","get",t).then((function(t){t&&e&&e(t)}))}function r(t,e){return Object(n["a"])("/api/admin/category/save","POST",t).then((function(t){t&&e&&e(t)}))}function l(t,e){return Object(n["a"])("/api/admin/category/del","get",t).then((function(t){t&&e&&e(t)}))}function s(t,e){return Object(n["a"])("/api/admin/category/all","get",t).then((function(t){t&&e&&e(t)}))}},f6df:function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return r})),a.d(e,"g",(function(){return l})),a.d(e,"f",(function(){return s})),a.d(e,"e",(function(){return c})),a.d(e,"c",(function(){return d}));var n=a("ed08");function i(t,e){return Object(n["a"])("/api/admin/banner/list","get",t).then((function(t){t&&e&&e(t)}))}function o(t,e){return Object(n["a"])("/api/admin/banner/detail_ad_list","get",t).then((function(t){t&&e&&e(t)}))}function r(t,e){return Object(n["a"])("/api/admin/banner/detail_ad_save","POST",t).then((function(t){t&&e&&e(t)}))}function l(t,e){return Object(n["a"])("/api/admin/banner/select_title","get",t).then((function(t){t&&e&&e(t)}))}function s(t,e){return Object(n["a"])("/api/admin/banner/set","get",t).then((function(t){t&&e&&e(t)}))}function c(t,e){return Object(n["a"])("/api/admin/banner/save","post",t).then((function(t){t&&e&&e(t)}))}function d(t,e){return Object(n["a"])("/api/admin/banner/del","get",t).then((function(t){t&&e&&e(t)}))}},f776:function(t,e,a){}}]);