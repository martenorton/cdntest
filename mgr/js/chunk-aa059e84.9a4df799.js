(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aa059e84"],{2921:function(t,e,n){},5745:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"novel-banner-warp"},[n("div",{staticClass:"container"},[n("div",{staticClass:"tabox"},[n("el-radio-group",{staticStyle:{"margin-bottom":"20px"},on:{change:function(e){return t.changetab(t.radio)}},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},t._l(t.tab,(function(e,a){return n("el-radio-button",{key:a,attrs:{label:e.code}},[t._v(t._s(e.name))])})),1)],1),n("div",{staticClass:"head-nav"},[n("span",{staticClass:"title"},[t._v("分类")]),n("div",{staticClass:"handle-btn-box"},[n("v-add",{attrs:{getData:t.getdatas,radio:t.radio}})],1)]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:""}},[n("el-table-column",{attrs:{prop:"name",label:"描述"}}),n("el-table-column",{staticClass:"imgbox",attrs:{prop:"img_url",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("img",{staticClass:"imgsss",staticStyle:{height:"100px","max-width":"80px"},attrs:{src:t.row.img_url}})]}}])}),n("el-table-column",{attrs:{prop:"is_title",label:"显示到标题栏"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"==e.row.is_title?n("span",[t._v("否")]):n("span",[t._v("是")])]}}])}),"index"!=t.radio?n("el-table-column",{attrs:{prop:"is_hot",label:"热门标签"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"==e.row.is_hot?n("span",[t._v("否")]):n("span",[t._v("是")])]}}],null,!1,2116534579)}):t._e(),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("v-add",{staticClass:"cell-item",attrs:{getData:t.getdatas,radio:t.radio,dataSource:e.row||null,type:"edit"}}),n("v-del",{attrs:{getData:t.getdatas,id:e.row.id}})]}}])})],1),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"current-page":t.currentPage1,"page-size":t.params.pageSize||20},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage1=e},"update:current-page":function(e){t.currentPage1=e}}})],1)],1)])},i=[],o=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),r=(n("28a5"),n("6b54"),n("d07e")),c=n("b3f4"),l=n("81bf");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={name:"banner",components:{vAdd:c["a"],vDel:l["a"]},data:function(){return{url:"./vuetable.json",cur_page:1,tableDatas:[],form:{},tableData:[],total:1,currentPage1:1,positionInfo:[],params:{page:1,pageSize:10,id:"",module_code:"index"},radio:"index",tab:[],img_domain:"",video_domain:"",loading:!0}},created:function(){this.getData(),this.img_domain=localStorage.getItem("img_domain"),this.video_domain=localStorage.getItem("video_domain")},computed:{},methods:{getnewimgs:function(t){var e=n("3452"),a=n("27ae").Base64;n("30dc");function i(t,n){var a=e.enc.Utf8.parse(o),i=e.enc.Utf8.parse(n),r=e.AES.decrypt(t,a,{iv:i,padding:e.pad.Pkcs7});return r.toString(e.enc.Utf8)}var o=localStorage.getItem("img_key"),r=new XMLHttpRequest;r.open("GET",t.img_url),r.send(null),r.onload=function(e){var n=e.target,o=JSON.parse(a.decode(n.responseText)),r=i(o.value,o.iv),c=r.split(","),l="data:"+c[0]+";base64,"+c[1];t.img_url=l,console.log(t)}},changetab:function(t){var e=this;this.params.module_code=t,this.currentPage1=1,this.params.page=1,this.loading=!0,Object(r["a"])(this.params,(function(n){200==n.code&&(e.tableData=n.data.list,e.tableData.map((function(t){t.oldimg=t.img_url,e.getnewimgs(t)})),console.log(e.tableData),e.tableData.module_code=t,e.total=n.data.count,e.loading=!1)}))},handleCurrentChange:function(t){console.log(this.params.module_code),this.params.page=t,this.loading=!0,this.getData()},methodFormatter:function(t,e){return 1==t.action_method?"内部视频":"外部链接"},getData:function(t){var e=this;Object(r["c"])(this.params,(function(t){200==t.code&&(e.tab=t.data,e.getdatas())}))},getdatas:function(){var t=this;Object(r["a"])(this.params,(function(e){200==e.code&&(t.tableData=e.data.list,t.tableData.map((function(e){e.oldimg=e.img_url,t.getnewimgs(e)})),t.total=e.data.count,t.loading=!1)}))},handleEditShow:function(t,e){var n=this;get_photo_set(u({},t,{status:e}),(function(t){n.$message.success("成功"),n.getData()}))},positionFromatter:function(t,e){var n="";return this.positionInfo.map((function(e,a){t.position==e.value&&(n=e.label)})),n}}},f=d,m=(n("6dd5"),n("2877")),p=Object(m["a"])(f,a,i,!1,null,null,null);e["default"]=p.exports},"6dd5":function(t,e,n){"use strict";var a=n("7978"),i=n.n(a);i.a},7978:function(t,e,n){},"81bf":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"del-btn-warp"},[n("el-button",{staticStyle:{color:"red"},attrs:{type:"text",icon:"el-icon-circle-close"},on:{click:function(e){return t.handleDelete()}}},[t._v("删除")]),n("el-dialog",{attrs:{title:"提示",visible:t.delVisible,"close-on-click-modal":!1,width:"300px",center:""},on:{"update:visible":function(e){t.delVisible=e}}},[n("div",{staticClass:"del-dialog-cnt"},[t._v("删除不可恢复，是否确定删除？")]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.delVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.deleteSure}},[t._v("确 定")])],1)])],1)},i=[],o=(n("dc69"),n("d07e")),r={name:"del-btn",components:{},props:{getData:{type:Function,default:null},id:{default:""}},data:function(){return{editVisible:!1,delVisible:!1,form:{}}},created:function(){},computed:{},methods:{handleDelete:function(){this.delVisible=!0},deleteSure:function(){var t=this;Object(o["d"])({id:this.id},(function(e){200==e.code&&(t.$message.success("删除成功"),t.getData()),t.delVisible=!1}))}}},c=r,l=(n("c362"),n("2877")),s=Object(l["a"])(c,a,i,!1,null,"7aafd4c0",null);e["a"]=s.exports},b3f4:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add-ranking-warp"},[t.type?t._e():n("el-button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.handleOpen()}}},[t._v(t._s("edit"==t.type?"编辑":"新增"))]),"edit"==t.type?n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(e){return t.handleOpen()}}},[t._v("编辑")]):t._e(),n("el-dialog",{attrs:{title:"edit"==t.type?"编辑":"新增","close-on-click-modal":!1,visible:t.editVisible,width:"40%"},on:{"update:visible":function(e){t.editVisible=e}}},[n("el-form",{ref:"ruleForm",staticClass:"detalis-form",attrs:{rules:t.rules,model:t.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请填写分类名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"图片",prop:"img_urls"}},[n("v-upload",{attrs:{default_img:t.form.img_urls,placeholder:"请选择分类图片"},on:{input:t.handleUploadImg,uploadload:t.getupload,srclinks:t.getlinks}})],1),n("el-form-item",{attrs:{label:"显示到标题栏",prop:"is_title"}},[n("el-radio",{attrs:{label:1},model:{value:t.form.is_title,callback:function(e){t.$set(t.form,"is_title",e)},expression:"form.is_title"}},[t._v("是")]),n("el-radio",{attrs:{label:0},model:{value:t.form.is_title,callback:function(e){t.$set(t.form,"is_title",e)},expression:"form.is_title"}},[t._v("否")])],1),"index"!=t.radio?n("el-form-item",{attrs:{label:"热门标签",prop:"is_hot"}},[n("el-radio",{attrs:{label:1},model:{value:t.form.is_hot,callback:function(e){t.$set(t.form,"is_hot",e)},expression:"form.is_hot"}},[t._v("是")]),n("el-radio",{attrs:{label:0},model:{value:t.form.is_hot,callback:function(e){t.$set(t.form,"is_hot",e)},expression:"form.is_hot"}},[t._v("否")])],1):t._e()],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){return t.closeBtn("ruleForm")}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1)],1)},i=[],o=(n("28a5"),n("d07e")),r=n("3dda"),c=(n("f6df"),{name:"basetable",components:{vUpload:r["a"]},props:{getData:{type:Function,default:null},type:{type:String,default:null},dataSource:{type:Object,default:null},radio:{type:String,default:null}},data:function(){return{editVisible:!1,form:{},uploding:"",tableDatas:[],positionInfo:[],param:{module:"banner"},titlelist:[],rules:{name:[{required:!0,message:"请填写分类名称",trigger:"blur"},{pattern:/^[^\s]*$/,message:"不能输入空格"},{pattern:/^\S{1,20}$/,message:"不能多于20个字"}],img_urls:[{required:!0,message:"请上传分类图片",trigger:"blur"}],is_title:[{required:!0,message:"请选择是否显示到标题栏",trigger:"blur"}],is_hot:[{required:!0,message:"请选择是否热门标签",trigger:"blur"}]},img_domain:"",video_domain:"",sctp:""}},created:function(){this.positionInfo=JSON.parse(window.localStorage.getItem("_position"))},computed:{},methods:{getlinks:function(t){this.sctp=t},getupload:function(t){this.uploding=t},handleOpen:function(){this.img_domain=localStorage.getItem("img_domain"),this.editVisible=!0,this.form={},"edit"==this.type&&(this.dataSource.img_urls=this.dataSource.img_url,this.form=JSON.parse(JSON.stringify(this.dataSource)))},handleUploadImg:function(t){this.form.img_urls=t,this.form=JSON.parse(JSON.stringify(this.form))},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;if(e.sctp)e.form.img_url=e.sctp;else{var n=localStorage.getItem("img_domain");e.form.img_url=e.form.oldimg.split(n)[1]}0==e.uploding?("edit"==e.type?(e.form.module_code=e.radio,e.form.id=e.dataSource.id,Object(o["b"])(e.form,(function(t){200==t.code&&(e.getData(),e.$message.success("修改成功"),e.sctp="")}))):(e.form.module_code=e.radio,Object(o["b"])(e.form,(function(t){200==t.code&&(e.getData(),e.$message.success("成功"),e.sctp="")}))),e.form={},e.editVisible=!1):e.$message.error("图片正在上传中")}))},resetForm:function(t){this.$refs[t].resetFields()},closeBtn:function(t){this.form={},this.$refs[t].resetFields(),this.editVisible=!1,console.log(this.$refs[t]),console.log(this.$refs[t].resetFields())}}}),l=c,s=n("2877"),u=Object(s["a"])(l,a,i,!1,null,null,null);e["a"]=u.exports},c362:function(t,e,n){"use strict";var a=n("2921"),i=n.n(a);i.a},d07e:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return l}));var a=n("ed08");function i(t,e){return Object(a["a"])("/api/admin/common/tab","get",t).then((function(t){t&&e&&e(t)}))}function o(t,e){return Object(a["a"])("/api/admin/category/list","get",t).then((function(t){t&&e&&e(t)}))}function r(t,e){return Object(a["a"])("/api/admin/category/save","POST",t).then((function(t){t&&e&&e(t)}))}function c(t,e){return Object(a["a"])("/api/admin/category/del","get",t).then((function(t){t&&e&&e(t)}))}function l(t,e){return Object(a["a"])("/api/admin/category/all","get",t).then((function(t){t&&e&&e(t)}))}},dc69:function(t,e,n){"use strict";n.d(e,"k",(function(){return i})),n.d(e,"g",(function(){return o})),n.d(e,"d",(function(){return r})),n.d(e,"f",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"j",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"n",(function(){return d})),n.d(e,"i",(function(){return f})),n.d(e,"l",(function(){return m})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return g})),n.d(e,"m",(function(){return b})),n.d(e,"h",(function(){return h}));var a=n("ed08");function i(t,e){return Object(a["a"])("/api/admin/recommend_top/list","get",t).then((function(t){t&&e&&e(t)}))}function o(t,e){return Object(a["a"])("/api/admin/recommend/top","get",t).then((function(t){t&&e&&e(t)}))}function r(t,e){return Object(a["a"])("/api/admin/recommend/del","get",t).then((function(t){t&&e&&e(t)}))}function c(t,e){return Object(a["a"])("/api/admin/recommend_top/set","get",t).then((function(t){t&&e&&e(t)}))}function l(t,e){return Object(a["a"])("/api/admin/recommend_top/save","post",t).then((function(t){t&&e&&e(t)}))}function s(t,e){return Object(a["a"])("/api/admin/recommend/list","get",t).then((function(t){t&&e&&e(t)}))}function u(t,e){return Object(a["a"])("/api/admin/recommend_top/add_video","post",t).then((function(t){t&&e&&e(t)}))}function d(t,e){return Object(a["a"])("/api/admin/video/all_video","get",t).then((function(t){t&&e&&e(t)}))}function f(t,e){return Object(a["a"])("/api/admin/recommend_top/icons","get",t).then((function(t){t&&e&&e(t)}))}function m(t,e){return Object(a["a"])("/api/admin/recommend_top/selected_list","get",t).then((function(t){t&&e&&e(t)}))}function p(t,e){return Object(a["a"])("/api/admin/selected_recommend/list","get",t).then((function(t){t&&e&&e(t)}))}function g(t,e){return Object(a["a"])("/api/admin/recommend_top/add_selected_video","post",t).then((function(t){t&&e&&e(t)}))}function b(t,e){return Object(a["a"])("/api/admin/selected_recommend/top","get",t).then((function(t){t&&e&&e(t)}))}function h(t,e){return Object(a["a"])("/api/admin/selected_recommend/del","get",t).then((function(t){t&&e&&e(t)}))}},f6df:function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r})),n.d(e,"g",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"e",(function(){return s})),n.d(e,"c",(function(){return u}));var a=n("ed08");function i(t,e){return Object(a["a"])("/api/admin/banner/list","get",t).then((function(t){t&&e&&e(t)}))}function o(t,e){return Object(a["a"])("/api/admin/banner/detail_ad_list","get",t).then((function(t){t&&e&&e(t)}))}function r(t,e){return Object(a["a"])("/api/admin/banner/detail_ad_save","POST",t).then((function(t){t&&e&&e(t)}))}function c(t,e){return Object(a["a"])("/api/admin/banner/select_title","get",t).then((function(t){t&&e&&e(t)}))}function l(t,e){return Object(a["a"])("/api/admin/banner/set","get",t).then((function(t){t&&e&&e(t)}))}function s(t,e){return Object(a["a"])("/api/admin/banner/save","post",t).then((function(t){t&&e&&e(t)}))}function u(t,e){return Object(a["a"])("/api/admin/banner/del","get",t).then((function(t){t&&e&&e(t)}))}}}]);