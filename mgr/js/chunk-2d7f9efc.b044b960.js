(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d7f9efc"],{"0451":function(t,e,a){},"25b6":function(t,e,a){},5639:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"novel-book-shelf-warp"},[a("div",{staticClass:"container"},[t._m(0),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"用户名(手机号码)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.user.nickname)+"("+t._s(e.row.user.mobile)+")")])]}}])}),a("el-table-column",{attrs:{prop:"isbook",label:"视频(视频id)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.video.name)+"("+t._s(e.row.video.id)+")")])]}}])}),a("el-table-column",{attrs:{prop:"content",label:"评论内容"}}),a("el-table-column",{attrs:{prop:"created_at",label:"评论时间"}}),a("el-table-column",{attrs:{label:"操作",width:"300",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"==e.row.auth_status?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.examine(e.row)}}},[t._v("待审核")]):t._e(),"1"==e.row.auth_status?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",disabled:""},on:{click:function(a){return t.examine(e.row)}}},[t._v("已通过")]):t._e(),"2"==e.row.auth_status?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",disabled:""},on:{click:function(a){return t.examine(e.row)}}},[t._v("未通过")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"删除",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("v-del",{attrs:{getData:t.getData,handleSelectionChange:t.handleSelectionChange,id:e.row.id}})]}}])})],1),a("el-dialog",{staticStyle:{width:"70%",margin:"auto"},attrs:{title:"审核","close-on-click-modal":!1,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{staticStyle:{width:"200px"},attrs:{label:"用户名："}},[t._v(t._s(t.name))]),a("el-form-item",{staticStyle:{width:"260px"},attrs:{label:"意见"}},[a("el-radio-group",{model:{value:t.ruleForm.auth_status,callback:function(e){t.$set(t.ruleForm,"auth_status",e)},expression:"ruleForm.auth_status"}},[a("el-radio",{attrs:{label:1}},[t._v("通过")]),a("el-radio",{attrs:{label:2}},[t._v("拒绝")])],1)],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea"},model:{value:t.ruleForm.remark,callback:function(e){t.$set(t.ruleForm,"remark",e)},expression:"ruleForm.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleClick("ruleForm")}}},[t._v("确 定")])],1)],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.params.pageSize||20},on:{"current-change":t.handleCurrentChange}})],1),a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"delete"},on:{click:function(e){return t.doVipAll()}}},[t._v("批量删除")])],1)])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head-nav"},[a("span",{staticClass:"title"},[t._v("评论列表")])])}],i=(a("7f7f"),a("ed08"));function r(t,e){return Object(i["a"])("/api/admin/comment/list","get",t).then((function(t){t&&e&&e(t)}))}function l(t,e){return Object(i["a"])("/api/admin/comment/auth","get",t).then((function(t){t&&e&&e(t)}))}function s(t,e){return Object(i["a"])("/api/admin/comment/del","get",t).then((function(t){t&&e&&e(t)}))}var c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"del-btn-warp"},[a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",icon:"el-icon-circle-close"},on:{click:function(e){return t.handleDelete()}}},[t._v("删除")]),a("el-dialog",{attrs:{title:"提示",visible:t.delVisible,width:"300px",center:"","close-on-click-modal":!1},on:{"update:visible":function(e){t.delVisible=e}}},[a("div",{staticClass:"del-dialog-cnt"},[t._v("删除不可恢复，是否确定删除？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.delVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.deleteSure}},[t._v("确 定")])],1)])],1)},u=[],d={name:"del-btn",components:{},props:{getData:{type:Function,default:null},id:{default:""}},data:function(){return{editVisible:!1,delVisible:!1,form:{}}},created:function(){},computed:{},methods:{handleDelete:function(){this.delVisible=!0},deleteSure:function(){var t=this;s({ids:this.id},(function(e){200==e.code&&(t.$message.success("删除成功"),t.getData()),t.delVisible=!1}))}}},m=d,f=(a("df5b"),a("2877")),p=Object(f["a"])(m,c,u,!1,null,"81b52138",null),b=p.exports,h={name:"book-shelf",components:{vDel:b},data:function(){return{dialogFormVisible:!1,tableData:[],params:{page:1,pageSize:10},ruleForm:{},ids:"",name:"",rules:{remark:[{required:!0,message:"请填写备注",trigger:"blur"}]},total:1}},created:function(){this.getData()},computed:{},methods:{handleCurrentChange:function(t){this.params.page=t,this.getData()},examine:function(t){this.id=t.id,this.name=t.user.nickname,console.log(this.id,this.name,"数据库"),this.dialogFormVisible=!0},handleClick:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;var a={id:e.id,auth_status:e.ruleForm.auth_status,remark:e.ruleForm.remark};l(a).then((function(t){t&&t.code,e.$message.success("操作成功"),e.getData()})),e.ruleForm={},e.dialogFormVisible=!1}))},handleSelectionChange:function(t){this.multipleSelection=t},doVipAll:function(){var t=this,e=[],a=[];a.forEach((function(t,e){obj[e]=t})),this.multipleSelection.map((function(t,a){e.push(t.id)}));var n=e;this.ids=n,this.ids=this.ids.join(",");var o=this.ids;console.log(o,"123"),s({ids:o},(function(e){t.$message.success("批量删除"),t.getData()}))},getData:function(){var t=this;r(this.params,(function(e){200==e.code&&(t.tableData=e.data.list,t.total=e.data.count)}))}}},g=h,v=(a("b11a"),Object(f["a"])(g,n,o,!1,null,null,null));e["default"]=v.exports},b11a:function(t,e,a){"use strict";var n=a("25b6"),o=a.n(n);o.a},df5b:function(t,e,a){"use strict";var n=a("0451"),o=a.n(n);o.a},ed08:function(t,e,a){"use strict";a.d(e,"a",(function(){return f}));a("8e6e"),a("ac6a"),a("456d");var n=a("bd86"),o=(a("a481"),a("bc3a")),i=a.n(o),r=a("01ea"),l=a("5c96");function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function u(t){var e=t.data.code;t.config.url;if(t.status>=200&&t.status<300){if("2000"==e)window.sessionStorage.setItem("_token",""),Object(l["Message"])("请重新登录"),window.location.replace("/#/login");else if(200!==e){var a=t.data.msg;"登录超时，请重新登录"!=a&&"请先登陆"!=a&&1005!==e&&1008!==e&&1034!==e||window.location.replace("/#/login"),Object(l["Message"])(t.data.msg)}return t.data}if(1008===e||1034===e)throw Object(l["Message"])(t.data.msg),window.location.replace("/#/login"),error;throw t.data&&Object(l["Message"])(t.data.msg),error}function d(t){return new Promise((function(e,a){200==t.code?e(t):401==t.code?(Object(l["Message"])("登陆过期,请重新登陆"),window.location.replace("/#/login")):e(t)}))}function m(t){/[\u4e00-\u9fa5]/g.test(t.message)||console.log(t.message)}function f(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],window.localStorage.getItem("_token")||"");switch(e){case"get":a={params:a};break;default:a={data:a}}var o=i.a.create({headers:{Accept:"application/json","Content-Type":"application/json",Authorization:n},timeout:1e4,baseURL:r["a"].baseURL});return o(c({url:"".concat(t),method:e},a)).then(u).then(d).then((function(t){return t})).catch((function(t){return m(t)}))}r["a"]}}]);